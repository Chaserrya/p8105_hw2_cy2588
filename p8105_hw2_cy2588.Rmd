---
title: "p8105_hw2_cy2588"
output: github_document
author: Chufeng Yang
date: 09/25/2020
---

```{r setup}
library(tidyverse)
library(readxl)
```

## problem 1

path to data:  

```{r}
path_to_data = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```

Read and clean the Mr. Trash Wheel sheet:  

```{r}
trashwheel_df = 
	read_xlsx(
		path = path_to_data,
		sheet = "Mr. Trash Wheel",
		range = cell_cols("A:N")) %>% 
	janitor::clean_names() %>% 
	drop_na(dumpster) %>% 
	mutate(
		sports_balls = round(sports_balls),
		sports_balls = as.integer(sports_balls)
	)
```

Read precipitation data for 2018 and 2017. 

```{r}
precip_2018 = 
	read_excel(
		"./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
		sheet = "2018 Precipitation",
		skip = 1
	) %>% 
	janitor::clean_names() %>% 
	drop_na(month) %>% 
	mutate(year = 2018) %>% 
	relocate(year)
precip_2017 = 
	read_excel(
		"./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
		sheet = "2017 Precipitation",
		skip = 1
	) %>% 
	janitor::clean_names() %>% 
	drop_na(month) %>% 
	mutate(year = 2017) %>% 
	relocate(year)
```

combine precipitation datasets and convert month to a character variable.

```{r}
month_df = 
	tibble(
		month = 1:12,
		month_name = month.name
	)
precip_df = 
	bind_rows(precip_2018, precip_2017)
precip_df =
	left_join(precip_df, month_df, by = "month")
```


This dataset contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The Mr. Trash Wheel spreadsheet is largely self-explanatory, and includes information on the dumpter number, date of collection, amount of total litter and litter type. 
The dataset contains information on year, month, and trash collected, include some specific kinds of trash. There are a total of `r nrow(trashwheel_df)` rows in our final dataset. Additional data sheets include month precipitation data. 

In this precipitation dataset:
* The total precipitation in 2018 was `r precip_df %>% filter(year == 2018) %>% pull(total) %>% sum()` inches.
* The median number of sports balls found in a dumpster in 2017 was `r trashwheel_df %>% filter(year == 2017) %>% pull(sports_balls) %>% median()`

## problem 2

read and clear data

```{r}
nyc_transit_df= 
	read.csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
	janitor::clean_names()  %>% 
  select(line: entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = TRUE, NO = FALSE))%>% 
  mutate(vending = recode(vending, YES = TRUE, NO = FALSE))
```

This dataset contains   . As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The Mr. Trash Wheel spreadsheet is largely self-explanatory, and includes information on the dumpter number, date of collection, amount of total litter and litter type. 
The dataset contains information on   , include   . There are a total of `r nrow(nyc_transit_df)` rows and `r ncol(nyc_transit_df)` cols in the resulting dataset.

How many distinct stations are there? 
```{r}
distinct_stations = nyc_transit_df  %>% 
	distinct(station_name, .keep_all = TRUE) %>% 
  distinct(line, .keep_all = TRUE)
```
 There are `r nrow(distinct_stations)` distinct stations.

How many stations are ADA compliant?
```{r}
ADA_comliant = filter(distinct_stations, ada == T)
```
There are `r nrow(ADA_comliant)` stations are ADA compliant.

What proportion of station entrances / exits without vending allow entrance?
```{r}
without_vending = filter(nyc_transit_df, vending == F)
allow = filter(without_vending, entry == T)
proportion = nrow(allow)/ nrow(without_vending)*100
```
The proportion of station entrances / exits without vending allow entrance is `r proportion`%














